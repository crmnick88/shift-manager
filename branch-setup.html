<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>×”×§××ª ×¡× ×™×£ - ××—×œ×§×•×ª ×•×¢×•×‘×“×™×</title>

  <!-- Firebase Compat (same versions as main app usually uses) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

  <style>
    *{box-sizing:border-box}
    body{margin:0;font-family:'Segoe UI',Tahoma,Arial,sans-serif;background:#f6f7fb;color:#111}
    .wrap{max-width:1100px;margin:24px auto;padding:0 16px}
    .card{background:#fff;border:1px solid #e8e9ef;border-radius:16px;box-shadow:0 8px 24px rgba(0,0,0,.06);padding:16px}
    h1{margin:0 0 8px;font-size:22px}
    .sub{margin:0 0 16px;color:#555}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    @media (max-width: 900px){.grid{grid-template-columns:1fr}}
    label{display:block;font-weight:600;margin:10px 0 6px}
    input,select{width:100%;padding:10px 12px;border:1px solid #d8dbe6;border-radius:12px;font-size:14px}
    button{border:0;border-radius:12px;padding:10px 14px;font-weight:700;cursor:pointer}
    .btn{background:#4f67ff;color:#fff;width:100%;margin-top:12px}
    .btn-danger{background:#e44; color:#fff}
    .btn-ghost{background:#f2f3f8;color:#111}
    .row{display:flex;gap:10px;align-items:center}
    .row > *{flex:1}
    .list{margin-top:12px;border-top:1px dashed #e5e6ee;padding-top:12px}
    .item{display:flex;gap:10px;align-items:center;justify-content:space-between;padding:10px 12px;border:1px solid #eef0f6;border-radius:12px;margin-bottom:10px}
    .item small{color:#666}
    .status{margin-top:12px;padding:10px 12px;border-radius:12px;display:none}
    .ok{background:#eaffef;border:1px solid #bfe9c8;color:#115c22}
    .err{background:#ffecec;border:1px solid #f1b9b9;color:#7b1010}
    a{color:#4f67ff;text-decoration:none}
    .topbar{display:flex;justify-content:space-between;align-items:center;gap:10px;margin-bottom:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="topbar">
        <div>
          <h1>ğŸ—ï¸ ×”×§××ª ×¡× ×™×£ â€“ ××—×œ×§×•×ª ×•×¢×•×‘×“×™×</h1>
          <p class="sub">×¢××•×“ × ×¤×¨×“ ×›×“×™ ×©×”×§××” ×ª×”×™×” × ×§×™×™×” ×•×œ× ×ª×©×‘×•×¨ ××ª ×¡× ×™×£ ×—×™×¤×”.</p>
        </div>
        <div class="row" style="max-width:360px">
          <button id="btnBack" class="btn-ghost" type="button">×—×–×¨×” ×œ××¢×¨×›×ª</button>
          <button id="btnSignOut" class="btn-danger" type="button">×”×ª× ×ª×§</button>
        </div>
      </div>

      <div id="authNotice" class="status err" style="display:none">
        ×œ× ××—×•×‘×¨. ×›× ×¡ ×§×•×“× ×›×× ×”×œ ×‘××¢×¨×›×ª ×”×¨××©×™×ª ×•××– ×¤×ª×— ××ª ×”×¢××•×“ ×”×–×” ×©×•×‘.
      </div>

      <div id="legacyNotice" class="status err" style="display:none">
        ×–×” ×¡× ×™×£ ×—×™×¤×” (Legacy). ×œ× ××§×™××™× ××•×ª×• ×›××Ÿ ×›×¨×’×¢.
      </div>

      <div id="main" style="display:none">
        <div class="grid">
          <div class="card" style="box-shadow:none">
            <h2 style="margin:0 0 8px;font-size:18px">â• ×”×•×¡×¤×ª ××—×œ×§×”</h2>
            <label>×©× ××—×œ×§×”</label>
            <input id="deptName" placeholder="×œ×“×•×’××”: ××—×¡×Ÿ / ×§×• ×œ×‘×Ÿ / ×§×• ×§×•×¤×•×ª" />
            <button id="btnAddDept" class="btn" type="button">×”×•×¡×£ ××—×œ×§×”</button>
            <div id="deptStatus" class="status"></div>

            <div class="list">
              <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
                <strong>××—×œ×§×•×ª ×§×™×™××•×ª</strong>
                <small id="deptCount">0</small>
              </div>
              <div id="deptList"></div>
            </div>
          </div>

          <div class="card" style="box-shadow:none">
            <h2 style="margin:0 0 8px;font-size:18px">â• ×”×•×¡×¤×ª ×¢×•×‘×“</h2>
            <label>×©× ××©×ª××© (×× ×’×œ×™×ª/×¡×¤×¨×•×ª)</label>
            <input id="empUser" placeholder="×œ×“×•×’××”: OR / AVI / NATALI" />
            <label>×©× ×œ×ª×¦×•×’×” (×¢×‘×¨×™×ª)</label>
            <input id="empName" placeholder="×œ×“×•×’××”: ××•×¨" />
            <label>×¡×™×¡××”</label>
            <input id="empPass" placeholder="×œ×“×•×’××”: 1234" />
            <label>×©×™×™×š ×œ××—×œ×§×”</label>
            <select id="empDept">
              <option value="">â€” ×‘×—×¨ ××—×œ×§×” â€”</option>
            </select>
            <button id="btnAddEmp" class="btn" type="button">×”×•×¡×£ ×¢×•×‘×“</button>
            <div id="empStatus" class="status"></div>

            <div class="list">
              <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
                <strong>×¢×•×‘×“×™× ×§×™×™××™×</strong>
                <small id="empCount">0</small>
              </div>
              <div id="empList"></div>
            </div>
          </div>
        </div>
      </div>

      <script src="./js/firebase.js"></script>
      <script src="./js/branch-setup.js"></script>
    </div>
  </div>
</body>
</html>
